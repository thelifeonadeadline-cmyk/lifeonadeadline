<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>L.O.A.D. | Life On A Deadline</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <style>
   

   
    .hero video {
      width: 100%;
      height: auto;
      display: block;
    }

    #tools {
      padding: 2rem;
      text-align: center;
    }

    .timer-container {
      text-align: center;
      background-color: #c6c3be14;
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      max-width: 500px;
      margin: 2rem auto;
    }

    .timer-display {
      font-size: 5rem;
      margin: 1rem 0;
      font-weight: bold;
    }

    .buttons button {
      padding: 10px 20px;
      margin: 0 10px;
      font-size: 1rem;
      background-color: #f4d06f;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .buttons button:hover {
      background-color: #ffeaa7;
    }

    .note {
      margin-top: 1.5rem;
      font-size: 0.9rem;
      color: #666;
    }

    .inputs {
      margin-bottom: 1rem;
    }

    .inputs label {
      display: block;
      margin: 0.5rem 0;
      font-size: 0.95rem;
    }

    .inputs input {
      padding: 6px;
      width: 60px;
      margin-left: 8px;
    }

    .mode-display {
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      color: #4d4d4d;
    }
   

    h1 {
      text-align: center;
      color: #000000;
    }

    form {
      max-width: 500px;
      margin: 2rem auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }

    input {
      width: 100%;
      padding: 0.6rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    button {
      margin-top: 1.5rem;
      background-color: #6A5ACD;
      color: white;
      padding: 0.7rem 1.5rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    button:hover {
      background-color: #00008B;
    }

    .topic-list {
      max-width: 600px;
      margin: 2rem auto;
    }

    .topic-card {
      background: #fff;
      border-left: 6px solid #6A5ACD;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .summary {
      text-align: center;
      font-weight: bold;
      margin-top: 2rem;
      color: #444;
    }
    input[type="date"] {
    padding: 0.7rem;
    font-size: 1rem;
    margin-bottom: 1rem;
  }
  @media (max-width: 600px) {
  .buttons {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem; /* space between stacked buttons */
  }

  .buttons button {
    width: 80%;
    margin: 0; /* remove side margin from earlier rule */
  }
}

  </style>
  <script type="module" src="firebase-config.js"></script>

</head>
<body>

   <!-- Navigation Bar -->
  <nav>
 <div class="logo">L.O.A.D.</div>
    <div class="menu-icon" onclick="toggleSidebar()">&#9776;</div>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="productivity.html">Study</a></li>
      <li><a href="lifestyle.html">Lifestyle</a></li>
      <li><a href="fitness.html">Fitness</a></li>
      <li><a href="budget.html">Budget</a></li>
      <li><a href="aboutme.html">About Me</a></li>
      <li><a href="contact.html">Feedback</a></li>
      <li id="authArea"></li>
    </ul>
  </nav>
 <div class="header-spacer"></div> <!-- Pushes content down -->
  <!-- Sidebar for Mobile -->
  <div class="sidebar" id="sidebar">
    <a href="javascript:void(0)" onclick="toggleSidebar()">‚úï Close</a>
    <a href="index.html" onclick="toggleSidebar()">Home</a>
    <a href="productivity.html" onclick="toggleSidebar()">Study</a>
    <a href="lifestyle.html" onclick="toggleSidebar()">Lifestyle</a>
    <a href="fitness.html" onclick="toggleSidebar()">Fitness</a>
    <a href="budget.html" onclick="toggleSidebar()">Budget</a>
    <a href="aboutme.html" onclick="toggleSidebar()">About Me</a>
    <a href="contact.html" onclick="toggleSidebar()">Feedback</a>
    
    <div id="mobileAuthArea" style="padding: 1rem;"></div>


</div>
  <div class="hero" id="hero">
    <video autoplay loop muted>
      <source src="Productivity.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  
  <section id="tools">
    <h2>Effective study methods include more than just tips ‚Äî they require tools that help you take action.</h2>
    <p><b>I created these tools because I was tired of just hearing advice ‚Äî I wanted something that actually helps.</b> Whether you're overwhelmed, unmotivated, or just tired of starting over, these are for you.</p>

    <h1>Revision Countdown</h1>
  <input type="date" id="examDate" />
  <div class="countdown" id="daysLeft">Enter your exam date ‚è≥</div>
  <div class="message" id="message"></div>
   <!-- Timer Tool -->
<section id="tools">
  <div class="tool-row">
    <!-- Timer Tool -->
    <div class="timer-container">
      <h1>üïí Focus Session Timer</h1>
      <p>Work with focus. Rest with intention.</p>

      <div class="inputs">
        <label>Focus Time (minutes):
          <input type="number" id="focusMinutes" value="25" min="1" />
        </label>
        <label>Break Time (minutes):
          <input type="number" id="breakMinutes" value="5" min="1" />
        </label>
      </div>

      <div class="mode-display" id="mode">Focus Time</div>
      <div class="timer-display" id="timer">25:00</div>

      <div class="buttons">
        <button onclick="startTimer()">Start</button>
        <button onclick="pauseTimer()">Pause</button>
        <button onclick="resetTimer()">Reset</button>
      </div>

      <p class="note">üí° Customize your session & get productive with purpose.</p>
    </div>
  </div>
</section>

<!-- Alarm Sound -->
<audio id="alarmSound" src="zapsplat_science_fiction_emergency_cockpit_alarm_107290.mp3" preload="auto"></audio>
     <!-- Topic Allocator -->
          <div class="topic-container">
            <h1>Topic Allocator</h1>
            <form id="topicForm">
              <label for="topic">Topic Name:</label>
              <input type="text" id="topic" required>
      
              <label for="time">Time to Study (minutes):</label>
              <input type="number" id="time" required>
      
              <label for="marks">Marks in Exam:</label>
              <input type="number" id="marks" required>
      
              <button type="submit">Add Topic</button>
            </form>
      
            <div class="topic-list" id="topicList"></div>
            <p class="summary" id="totalTimeDisplay"></p>
          </div>
        </div>
    
      <h1>Priority Task List</h1>

<form id="taskForm">
  <label for="taskName">Task Name:</label>
  <input type="text" id="taskName" required>

  <label for="priority">Priority:</label>
  <select id="priority">
    <option value="high">üî¥ High</option>
    <option value="medium">üü° Medium</option>
    <option value="low">üü¢ Low</option>
  </select>

  <button type="submit">Add Task</button>
</form>

<div class="task-list" id="taskList"></div>
<h1>Time Block Scheduler</h1>

<form id="timeBlockForm">
  <label for="blockTask">Task:</label>
  <input type="text" id="blockTask" required>

  <label for="startTime">Start Time:</label>
  <input type="time" id="startTime" required>

  <label for="endTime">End Time:</label>
  <input type="time" id="endTime" required>

  <button type="submit">Add Block</button>
</form>

<div class="schedule" id="schedule"></div>
</section>
</section>      
  <footer>
    &copy; 2025 Life On A Deadline. Built with action.
  </footer>
  
<script>
  //nav
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('active');
  }
</script>

  <script src="javascript.js"></script>
  <audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.ogg" preload="auto"></audio>
  <audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.ogg" preload="auto"></audio>
<script type="module">
  // Import ALL necessary Firebase services from your config file
  import { auth, db } from './firebase-config.js'; 
  // No need to import app or analytics here unless you're specifically using them in this script block.
  // getAnalytics is already called in firebase-config.js.

  // Import specific Firestore functions needed for operations
  import { doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

  // Import onAuthStateChanged for authentication state listening
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";

  onAuthStateChanged(auth, async (user) => { // Make the callback async
    if (user) {
      console.log("Logged in as:", user.email);
      // User is signed in, so let's check if their profile exists in Firestore
      const userDocRef = doc(db, "users", user.uid);
      const userDocSnap = await getDoc(userDocRef);

      if (!userDocSnap.exists()) {
        // If the user document doesn't exist, create it (e.g., for a new signup)
        try {
          await setDoc(userDocRef, {
            email: user.email,
            joinedAt: new Date(),
            // Add any other default user profile data here
          });
          console.log("New user profile created in Firestore for:", user.email);
        } catch (e) {
          console.error("Error creating user profile in Firestore:", e);
        }
      } else {
        console.log("User profile already exists in Firestore.");
        // You can also update 'lastLoggedIn' here if needed
        // await updateDoc(userDocRef, { lastLoggedIn: new Date() });
      }

    } else {
      console.log("No user logged in");
      // Handle logged out state, e.g., redirect to login page
    }
  });

  // You can now use `auth` and `db` to interact with Firebase for other purposes too
  // For example, if you wanted to fetch some data from Firestore when the page loads
  async function fetchSomeData() {
    // Example: get a specific document from a collection named 'appInfo'
    const appInfoDocRef = doc(db, "appInfo", "general");
    const appInfoSnap = await getDoc(appInfoDocRef);

    if (appInfoSnap.exists()) {
      console.log("App Info:", appInfoSnap.data());
    } else {
      console.log("No app info document found!");
    }
  }

  // You could call this function when the page loads or based on some user interaction
  // fetchSomeData();

</script>
<script type="module">
  import { auth } from './firebase-config.js';
  import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";

  const authArea = document.getElementById("authArea");
  const mobileAuthArea = document.getElementById("mobileAuthArea");

  onAuthStateChanged(auth, (user) => {
    if (user) {
      const userEmail = user.email.split('@')[0];

      authArea.innerHTML = `<span>Welcome, ${userEmail}!</span> <a href="#" id="logoutBtn">Logout</a>`;
      mobileAuthArea.innerHTML = `<span>Welcome, ${userEmail}!</span><br><a href="#" id="mobileLogoutBtn">Logout</a>`;

      document.getElementById("logoutBtn").addEventListener("click", (e) => {
        e.preventDefault();
        signOut(auth).then(() => location.reload());
      });

      document.getElementById("mobileLogoutBtn").addEventListener("click", (e) => {
        e.preventDefault();
        signOut(auth).then(() => {
          toggleSidebar();
          location.reload();
        });
      });
    } else {
      authArea.innerHTML = `<a href="login.html">Login</a> / <a href="signup.html">Sign Up</a>`;
      mobileAuthArea.innerHTML = `<a href="login.html" onclick="toggleSidebar()">Login</a> / 
                                   <a href="signup.html" onclick="toggleSidebar()">Sign Up</a>`;
    }
  });
</script>
<!-- Floating AI Chat Button -->
<button id="customChatBtn" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
   background: linear-gradient(135deg, #6a0dad, #c74aac);
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 30px;
  font-size: 14px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  z-index: 9999;
  cursor: pointer;
">
  üí¨ Chat with<br>L.O.A.D Ai
</button>

<script type="module">
  import { auth } from './firebase-config.js';
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";

  const chatBtn = document.getElementById("customChatBtn");
  let chatScriptLoaded = false;

  onAuthStateChanged(auth, (user) => {
    chatBtn.onclick = () => {
      if (user) {
        if (!chatScriptLoaded) {
          // Load Chatbase config
          window.chatbaseConfig = {
            chatbotId: "czT4oi2tu5sm0RW2n0-iC",
            welcomeMessage: "Welcome to L.O.A.D! What can I help you improve today?",
            theme: {
              buttonBackgroundColor: "#6A0DAD",
              buttonTextColor: "#ffffff"
            }
          };

          const script = document.createElement("script");
          script.src = "https://www.chatbase.co/embed.min.js";
          script.defer = true;
          document.body.appendChild(script);

          chatScriptLoaded = true;

          // Hide button after 1 second
          setTimeout(() => {
            chatBtn.style.display = 'none';
          }, 1000);
        } else {
          // Toggle chat if already loaded
          const bubble = document.querySelector('.chatbase-bubble');
          if (bubble) bubble.click();
        }
      } else {
        // User is not logged in
        alert("üëã Hey loves, you need a free account to chat with the L.O.A.D Assistant. Please log in or sign up üíú");
      }
    };
  });

</script>
</body>
</html>

