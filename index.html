<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>L.O.A.D. | Life On A Deadline</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <style>
    .hero {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      height: 100vh;
      background-image: url('BossLady.jpg');
      background-size: cover;
      background-position: center;
      position: relative;
      padding: 2rem;
    }
    .hero::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 0;
    }
    .hero * {
      position: relative;
      z-index: 1;
    }
    .hero h1 {
      font-size: 4rem;
      margin-bottom: 0.5rem;
      color: #ffffff;
      letter-spacing: 2px;
    }
    #welcome {
      text-align: center;
      padding: 2rem;
      font-size: 1.8rem;
      font-weight: 600;
    }
  </style>
</head>
<body>

  <!-- Navigation Bar -->
  <nav>
    <div class="logo">L.O.A.D.</div>
    <div class="menu-icon" onclick="toggleSidebar()">&#9776;</div>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="productivity.html">Study</a></li>
      <li><a href="lifestyle.html">Lifestyle</a></li>
      <li><a href="fitness.html">Fitness</a></li>
      <li><a href="budget.html">Budget</a></li>
      <li><a href="aboutme.html">About Me</a></li>
      <li><a href="contact.html">Feedback</a></li>
      <li id="authArea"></li>
    </ul>
  </nav>

  <!-- Sidebar for Mobile -->
  <div class="sidebar" id="sidebar">
    <a href="javascript:void(0)" onclick="toggleSidebar()">âœ• Close</a>
    <a href="index.html" onclick="toggleSidebar()">Home</a>
    <a href="productivity.html" onclick="toggleSidebar()">Study</a>
    <a href="lifestyle.html" onclick="toggleSidebar()">Lifestyle</a>
    <a href="fitness.html" onclick="toggleSidebar()">Fitness</a>
    <a href="budget.html" onclick="toggleSidebar()">Budget</a>
    <a href="aboutme.html" onclick="toggleSidebar()">About Me</a>
    <a href="contact.html" onclick="toggleSidebar()">Feedback</a>
    <div id="mobileAuthArea"></div>
    <!-- Inside your nav -->
<li id="navUser"></li>



  </div>

  <!-- Hero Section -->
  <section class="hero" id="hero">
    <h1>Life On A Deadline</h1>
    <p class="tagline">L.O.A.Ding into your full potential.</p>
    <p class="subtext">Cause if you're not living, what are you doing babies??</p>
    <a href="#tools" class="cta-button">Start Now</a>
  </section>

  <!-- Personalized Welcome -->
  <section id="welcome">
   
<h2 id="heroWelcome"></h2>
  </section>

  <!-- Tools Section -->
  <section id="tools">
    <h2>Iâ€™m tired of all the tips and tricks â€” we need action.</h2>
    <p>From productivity to wellness â€” start using real tools that move your life forward. No fluff. Just focus.</p>
    <section id="sections" style="padding: 4rem 2rem; background-color: #fafafa;">
      <h2 style="text-align: center;">Explore Sections</h2>
      <h3 style="text-align: center;">L.O.A.Ding into your full potential</h3>
      <div class="card-grid">
        <div class="card">
          <h3>Study</h3>
          <p>Time-blocking tools, study planners, and focus helpers for your busiest seasons.</p>
          <a href="productivity.html" class="card-btn">Explore</a>
        </div>
        <div class="card">
          <h3>Lifestyle</h3>
          <p>Self-care check-ins, daily routines, and balance-focused resources to thrive as a student.</p>
          <a href="lifestyle.html" class="card-btn">Explore</a>
        </div>
        <div class="card">
          <h3>Fitness</h3>
          <p>Track workouts, log energy, and stay committed to your physical wellness journey.</p>
          <a href="fitness.html" class="card-btn">Explore</a>
        </div>
        <div class="card">
          <h3>Budget</h3>
          <p>As a student, social media and fast food want your money. So letâ€™s help you budget smart.</p>
          <a href="budget.html" class="card-btn">Explore</a>
        </div>
      </div>
    </section>
  </section>

  <!-- Footer -->
  <footer>
    &copy; 2025 Life On A Deadline. Built with action.
  </footer>

  <!-- Sidebar Toggle Script -->
  <script>
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }
  </script>

  <!-- Floating AI Chat Button -->
  <button id="customChatBtn" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: linear-gradient(135deg, #6a0dad, #c74aac);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 30px;
    font-size: 14px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    z-index: 9999;
    cursor: pointer;
  ">
    ðŸ’¬ Chat with<br>L.O.A.D Ai
  </button>

  <!-- Firebase Auth + Firestore Logic -->
  <script type="module">
  import { auth, db } from "./firebase-config.js";
  import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
  import { doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

  const authArea = document.getElementById("authArea");
  const mobileAuthArea = document.getElementById("mobileAuthArea");
  const navUser = document.getElementById("navUser");
  const heroWelcome = document.getElementById("heroWelcome");
  const chatBtn = document.getElementById("customChatBtn");

  let chatLoaded = false; // prevent multiple script loads

  onAuthStateChanged(auth, async (user) => {
    if (user) {
      let displayName = user.email.split("@")[0];

      // Try to get user data from Firestore
      try {
        const userDocRef = doc(db, "users", user.uid);
        const userDocSnap = await getDoc(userDocRef);
        if (!userDocSnap.exists()) {
          await setDoc(userDocRef, { email: user.email, name: displayName, joinedAt: new Date() });
        } else {
          displayName = userDocSnap.data().name || displayName;
        }
      } catch (err) {
        console.error("Firestore fetch error:", err);
      }

      // Update UI
      authArea.innerHTML = `<span style="color:white; font-weight:bold;">Welcome, ${displayName}</span> <a href="#" id="logoutBtn">Logout</a>`;
      mobileAuthArea.innerHTML = `<span style="color:white; font-weight:bold;">Welcome, ${displayName}</span><br><a href="#" id="mobileLogoutBtn">Logout</a>`;
      navUser.textContent = displayName;
      heroWelcome.textContent = `Welcome, ${displayName}!`;

      // Logout buttons
      document.getElementById("logoutBtn").addEventListener("click", async (e) => {
        e.preventDefault();
        await signOut(auth);
      });
      document.getElementById("mobileLogoutBtn").addEventListener("click", async (e) => {
        e.preventDefault();
        await signOut(auth);
      });

      // Enable Chatbase when logged in
      if (chatBtn) {
        chatBtn.onclick = () => {
          if (!chatLoaded) {
            window.chatbaseConfig = {
              chatbotId: "czT4oi2tu5sm0RW2n0-iC",
              welcomeMessage: `Welcome back, ${displayName}! What can I help you with today?`,
              theme: { buttonBackgroundColor: "#6A0DAD", buttonTextColor: "#ffffff" }
            };
            const script = document.createElement("script");
            script.src = "https://www.chatbase.co/embed.min.js";
            script.defer = true;
            document.body.appendChild(script);
            chatLoaded = true;
            setTimeout(() => chatBtn.style.display = 'none', 1200);
          } else {
            const bubble = document.querySelector('.chatbase-bubble');
            if (bubble) bubble.click();
          }
        };
      }

    } else {
      // Guest View
      authArea.innerHTML = `<a href="login.html">Login</a> / <a href="signup.html">Sign Up</a>`;
      mobileAuthArea.innerHTML = `<a href="login.html" onclick="toggleSidebar()">Login</a> / <a href="signup.html" onclick="toggleSidebar()">Sign Up</a>`;
      navUser.textContent = "";
      heroWelcome.textContent = "";

      // Chat disabled for guests
      if (chatBtn) {
        chatBtn.onclick = () => {
          alert("ðŸ‘‹ Please log in to chat with the L.O.A.D Assistant.");
        };
      }
    }
  });
</script>


</body>
</html>
